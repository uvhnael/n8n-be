# ğŸ¨ Scheduled Posts - Visual Architecture

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Client Layer                                â”‚
â”‚  â€¢ n8n Workflow  â€¢ Web UI  â€¢ Postman  â€¢ cURL  â€¢ Browser             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ HTTP/REST
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Controller Layer                                â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ContentController    â”‚          â”‚ ScheduledPostController    â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ /api/content         â”‚          â”‚ /api/scheduled-posts       â”‚  â”‚
â”‚  â”‚                      â”‚          â”‚                            â”‚  â”‚
â”‚  â”‚ â€¢ generate           â”‚          â”‚ â€¢ schedule                 â”‚  â”‚
â”‚  â”‚ â€¢ approve            â”‚          â”‚ â€¢ list                     â”‚  â”‚
â”‚  â”‚ â€¢ reject             â”‚          â”‚ â€¢ update                   â”‚  â”‚
â”‚  â”‚ â€¢ list               â”‚          â”‚ â€¢ cancel                   â”‚  â”‚
â”‚  â”‚ â€¢ batch              â”‚          â”‚ â€¢ publish-now              â”‚  â”‚
â”‚  â”‚ â€¢ suggestions        â”‚          â”‚ â€¢ calendar                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Service Layer                                  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            ContentGeneratorService                            â”‚  â”‚
â”‚  â”‚  â€¢ generateContent()   â€¢ approveContent()                     â”‚  â”‚
â”‚  â”‚  â€¢ buildPrompt()       â€¢ rejectContent()                      â”‚  â”‚
â”‚  â”‚  â€¢ calculateTrendScore()                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            ScheduledPostService                               â”‚  â”‚
â”‚  â”‚  â€¢ schedulePost()      â€¢ updateScheduledPost()                â”‚  â”‚
â”‚  â”‚  â€¢ getPostsToPublish() â€¢ cancelScheduledPost()                â”‚  â”‚
â”‚  â”‚  â€¢ updatePostStatus()                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            PostPublisherService                               â”‚  â”‚
â”‚  â”‚  â€¢ publish()           â€¢ publishNow()                         â”‚  â”‚
â”‚  â”‚  â€¢ publishToFacebook() â€¢ publishToInstagram()                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  GeminiService   â”‚  â”‚  TrendAnalysisService                  â”‚  â”‚
â”‚  â”‚  â€¢ generateText()â”‚  â”‚  â€¢ getCurrentTrends()                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                          â”‚
             â”‚                          â–¼
             â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚              â”‚  Scheduler Layer        â”‚
             â”‚              â”‚  PostPublishScheduler   â”‚
             â”‚              â”‚  â€¢ Every minute check   â”‚
             â”‚              â”‚  â€¢ Auto-publish posts   â”‚
             â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                          â”‚
             â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   External APIs       â”‚  â”‚         Repository Layer                 â”‚
â”‚                       â”‚  â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â€¢ GeneratedContentRepository            â”‚
â”‚  â”‚ Google Gemini   â”‚ â”‚  â”‚  â€¢ ScheduledPostRepository               â”‚
â”‚  â”‚ AI API          â”‚ â”‚  â”‚  â€¢ PublishHistoryRepository              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â€¢ TrendAnalysisRepository               â”‚
â”‚                       â”‚  â”‚  â€¢ InsightsRepository                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ Facebook        â”‚ â”‚                     â”‚
â”‚  â”‚ Graph API       â”‚ â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â–¼
â”‚                       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚         Database Layer                   â”‚
â”‚  â”‚ Instagram       â”‚ â”‚  â”‚         MySQL 8.0                        â”‚
â”‚  â”‚ API             â”‚ â”‚  â”‚                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ Tables:                            â”‚ â”‚
                            â”‚  â”‚ â€¢ generated_content                â”‚ â”‚
                            â”‚  â”‚ â€¢ scheduled_posts                  â”‚ â”‚
                            â”‚  â”‚ â€¢ publish_history                  â”‚ â”‚
                            â”‚  â”‚ â€¢ trend_analysis                   â”‚ â”‚
                            â”‚  â”‚ â€¢ insights                         â”‚ â”‚
                            â”‚  â”‚ â€¢ keywords                         â”‚ â”‚
                            â”‚  â”‚ â€¢ ads                              â”‚ â”‚
                            â”‚  â”‚ â€¢ users                            â”‚ â”‚
                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Diagrams

### Flow 1: Content Generation

```
User Request
    â”‚
    â”œâ”€â”€â–º POST /api/content/generate
    â”‚         â”‚
    â”‚         â”œâ”€â”€â–º ContentGeneratorService
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º TrendAnalysisService
    â”‚         â”‚         â”‚         â”‚
    â”‚         â”‚         â”‚         â””â”€â”€â–º [Get trending keywords]
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Build AI Prompt
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º GeminiService
    â”‚         â”‚         â”‚         â”‚
    â”‚         â”‚         â”‚         â””â”€â”€â–º Google Gemini API
    â”‚         â”‚         â”‚                   â”‚
    â”‚         â”‚         â”‚                   â””â”€â”€â–º [Generated text]
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Parse JSON Response
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Calculate Trend Score
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â–º Save to Database
    â”‚         â”‚                   â”‚
    â”‚         â”‚                   â–¼
    â”‚         â”‚         [generated_content table]
    â”‚         â”‚         Status: DRAFT
    â”‚         â”‚
    â”‚         â””â”€â”€â–º Return Generated Content
    â”‚
    â””â”€â”€â–º Response with ID and content
```

### Flow 2: Content Approval

```
User Request
    â”‚
    â”œâ”€â”€â–º PUT /api/content/{id}/approve
    â”‚         â”‚
    â”‚         â”œâ”€â”€â–º ContentGeneratorService
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Find content by ID
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Update status to APPROVED
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Set approvedBy and approvedAt
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â–º Save to Database
    â”‚         â”‚                   â”‚
    â”‚         â”‚                   â–¼
    â”‚         â”‚         [generated_content table]
    â”‚         â”‚         Status: APPROVED
    â”‚         â”‚
    â”‚         â””â”€â”€â–º Return Updated Content
    â”‚
    â””â”€â”€â–º Response with updated content
```

### Flow 3: Post Scheduling

```
User Request
    â”‚
    â”œâ”€â”€â–º POST /api/scheduled-posts
    â”‚         â”‚
    â”‚         â”œâ”€â”€â–º ScheduledPostService
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Validate content exists
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Check content is APPROVED
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Validate scheduled time
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Create ScheduledPost entity
    â”‚         â”‚         â”‚         Status: PENDING
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Save to Database
    â”‚         â”‚         â”‚         â”‚
    â”‚         â”‚         â”‚         â–¼
    â”‚         â”‚         â”‚   [scheduled_posts table]
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â–º Log to PublishHistory
    â”‚         â”‚                   â”‚
    â”‚         â”‚                   â–¼
    â”‚         â”‚         [publish_history table]
    â”‚         â”‚         Action: CREATED
    â”‚         â”‚
    â”‚         â””â”€â”€â–º Return Scheduled Post
    â”‚
    â””â”€â”€â–º Response with scheduled post details
```

### Flow 4: Auto-Publishing (Background)

```
PostPublishScheduler
[Runs every minute: 0 * * * * *]
    â”‚
    â”œâ”€â”€â–º Check current time
    â”‚
    â”œâ”€â”€â–º ScheduledPostService.getPostsToPublish()
    â”‚         â”‚
    â”‚         â””â”€â”€â–º Query: scheduled_time BETWEEN now AND now+5min
    â”‚                AND status = 'PENDING'
    â”‚                   â”‚
    â”‚                   â””â”€â”€â–º [List of posts to publish]
    â”‚
    â”œâ”€â”€â–º For each post:
    â”‚         â”‚
    â”‚         â”œâ”€â”€â–º PostPublisherService.publish(post)
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Update status to PUBLISHING
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Determine platform
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º publishToFacebook() OR publishToInstagram()
    â”‚         â”‚         â”‚         â”‚
    â”‚         â”‚         â”‚         â”œâ”€â”€â–º Build API request
    â”‚         â”‚         â”‚         â”‚
    â”‚         â”‚         â”‚         â”œâ”€â”€â–º Call Platform API
    â”‚         â”‚         â”‚         â”‚         â”‚
    â”‚         â”‚         â”‚         â”‚         â”œâ”€â”€â–º Success
    â”‚         â”‚         â”‚         â”‚         â”‚     â”‚
    â”‚         â”‚         â”‚         â”‚         â”‚     â””â”€â”€â–º Get post_id
    â”‚         â”‚         â”‚         â”‚         â”‚
    â”‚         â”‚         â”‚         â”‚         â””â”€â”€â–º Failure
    â”‚         â”‚         â”‚         â”‚               â”‚
    â”‚         â”‚         â”‚         â”‚               â””â”€â”€â–º Get error
    â”‚         â”‚         â”‚         â”‚
    â”‚         â”‚         â”‚         â””â”€â”€â–º Return result
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Update post status
    â”‚         â”‚         â”‚     â”œâ”€â”€â–º PUBLISHED (if success)
    â”‚         â”‚         â”‚     â””â”€â”€â–º FAILED (if error)
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â–º Save to Database
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â–º Log to PublishHistory
    â”‚         â”‚                   â”‚
    â”‚         â”‚                   â–¼
    â”‚         â”‚         [publish_history table]
    â”‚         â”‚         Action: PUBLISHED or FAILED
    â”‚         â”‚
    â”‚         â””â”€â”€â–º Continue to next post
    â”‚
    â””â”€â”€â–º Log completion
```

## ğŸ“Š State Diagrams

### Content State Machine

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ CREATE â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
          â”‚
          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     approve()     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ DRAFT  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ APPROVED â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
          â”‚                              â”‚
          â”‚ reject()                     â”‚
          â”‚                              â”‚
          â–¼                              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              [Can be scheduled]
     â”‚ REJECTED â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Post State Machine

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ SCHEDULE â”‚
     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”‚
           â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ PENDING â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
          â”‚
          â”‚ scheduler triggers
          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ PUBLISHING â”‚
     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€ success â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                            â”‚ PUBLISHED â”‚
           â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€ failure â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                            â”‚ FAILED  â”‚
           â”‚                            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”‚                                 â”‚
           â”‚                                 â”‚ retry < 3
           â”‚                                 â”‚
           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â””â”€â”€â”€â”€â”€â”€â”€ cancelled â”€â”€â”€â”€â”€â”€â”€â”€â–º â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ CANCELLED â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Component Interactions

### Complete Request-Response Flow

```
1. Generate Content
   Client â†’ ContentController â†’ ContentGeneratorService â†’ GeminiService â†’ Gemini API
                                         â†“
                                 GeneratedContentRepository
                                         â†“
                                   MySQL Database

2. Approve Content
   Client â†’ ContentController â†’ ContentGeneratorService
                                         â†“
                                 GeneratedContentRepository
                                         â†“
                                   MySQL Database

3. Schedule Post
   Client â†’ ScheduledPostController â†’ ScheduledPostService
                                         â†“
                                 ScheduledPostRepository
                                         â†“
                                   MySQL Database

4. Auto Publish (Background)
   PostPublishScheduler â†’ ScheduledPostService â†’ PostPublisherService â†’ Facebook API
                                         â†“
                                 ScheduledPostRepository
                                         â†“
                                   MySQL Database
```

## ğŸ” Security Flow

```
Request
   â”‚
   â”œâ”€â”€â–º SecurityConfig (JWT Filter)
   â”‚         â”‚
   â”‚         â”œâ”€â”€â–º Validate JWT Token
   â”‚         â”‚
   â”‚         â””â”€â”€â–º Extract User Info
   â”‚
   â””â”€â”€â–º Controller (if authenticated)
```

## ğŸ“ˆ Data Models

### Entity Relationships

```
User (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (N) GeneratedContent
                             â”‚
                             â”‚ (1)
                             â”‚
                             â–¼ (N)
                       ScheduledPost
                             â”‚
                             â”‚ (1)
                             â”‚
                             â–¼ (N)
                       PublishHistory

Insight (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (N) Keyword
```

---

**Visual representation of the complete Scheduled Posts feature architecture!**
